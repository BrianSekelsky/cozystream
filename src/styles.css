@tailwind base;
@tailwind components;
@tailwind utilities;

/* ── Hide scrollbar while keeping scroll behaviour (used on horizontal rows) ── */
.scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
.scrollbar-hide::-webkit-scrollbar { display: none; }

/* ── CSS custom properties ─────────────────────────────────────────────── */

:root {
  --color-surface:         rgb(10 10 10);
  --color-surface-raised:  rgb(18 18 18);
  --color-surface-overlay: rgb(255 255 255 / 0.06);
  --color-accent:          #e50914;
  --color-accent-hover:    color-mix(in srgb, var(--color-accent) 80%, black);
  --text-rgb:              255 255 255;
  --surface-rgb:           10 10 10;
  --card-gap: 0.75rem;
  --row-spacing: 2rem;
  --card-columns-offset: 0;
}

/* ── Base styles ───────────────────────────────────────────────────────── */

@layer base {
  * {
    box-sizing: border-box;
  }

  html {
    background-color: var(--color-surface);
    color: rgb(var(--text-rgb));
    scrollbar-gutter: stable;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  body {
    margin: 0;
    min-height: 100vh;
  }

  ::-webkit-scrollbar { width: 6px; }
  ::-webkit-scrollbar-track { background: var(--color-surface); }
  ::-webkit-scrollbar-thumb { background-color: rgb(var(--text-rgb) / 0.20); @apply rounded-full; }
  ::-webkit-scrollbar-thumb:hover { background-color: rgb(var(--text-rgb) / 0.40); }
}

/* ── Accent helpers (CSS vars aren't picked up as Tailwind classes) ─────── */

.bg-accent       { background-color: var(--color-accent); }
.bg-accent-hover  { background-color: var(--color-accent-hover); }
.text-accent     { color: var(--color-accent); }
.border-accent   { border-color: var(--color-accent); }
.hover\:bg-accent-hover:hover { background-color: var(--color-accent-hover); }

/* ── Font size compensation for serif/mono ─────────────────────────────── */
/* Serif and mono fonts render visually smaller than sans at the same px   */
/* size. Bump small text classes (text-xs, text-sm, text-base) by ~10%    */
/* when used as descendants OR same-element with a serif/mono font class.  */
/* Large sizes (text-3xl+) are intentionally excluded so headings and      */
/* titles keep their intended size.                                        */
.font-serif .text-xs,   .font-mono .text-xs,
.font-serif.text-xs,    .font-mono.text-xs    { font-size: 0.825rem; }  /* 0.75rem × 1.1  */
.font-serif .text-sm,   .font-mono .text-sm,
.font-serif.text-sm,    .font-mono.text-sm    { font-size: 0.963rem; }  /* 0.875rem × 1.1 */
.font-serif .text-base, .font-mono .text-base,
.font-serif.text-base,  .font-mono.text-base  { font-size: 1.1rem; }   /* 1rem × 1.1     */

/* ── Card-width variable (mirrors Browse grid breakpoints, offset by --card-columns-offset) ── */
:root {
  --card-width: calc((100vw - 4rem - 15px - 2 * 0.75rem) / (3 + var(--card-columns-offset)));
}
@media (min-width: 640px)  { :root { --card-width: calc((100vw - 4rem - 15px - 3 * 0.75rem) / (4 + var(--card-columns-offset))); } }
@media (min-width: 768px)  { :root { --card-width: calc((100vw - 4rem - 15px - 4 * 0.75rem) / (5 + var(--card-columns-offset))); } }
@media (min-width: 1024px) { :root { --card-width: calc((100vw - 4rem - 15px - 5 * 0.75rem) / (6 + var(--card-columns-offset))); } }
@media (min-width: 1280px) { :root { --card-width: calc((100vw - 4rem - 15px - 7 * 0.75rem) / (8 + var(--card-columns-offset))); } }

/* ─────────────────────────────────────────────────────────────────────────
   Color-scheme-aware overrides
   Repaint the text-white/* and bg-white/* opacity utilities using
   --text-rgb so components work across all color schemes and themes.
   ───────────────────────────────────────────────────────────────────────── */

/* Text — base + opacity variants */
.text-white     { color: rgb(var(--text-rgb)); }
.text-white\/10 { color: rgb(var(--text-rgb) / 0.10); }
.text-white\/20 { color: rgb(var(--text-rgb) / 0.20); }
.text-white\/25 { color: rgb(var(--text-rgb) / 0.25); }
.text-white\/30 { color: rgb(var(--text-rgb) / 0.30); }
.text-white\/40 { color: rgb(var(--text-rgb) / 0.40); }
.text-white\/50 { color: rgb(var(--text-rgb) / 0.50); }
.text-white\/60 { color: rgb(var(--text-rgb) / 0.60); }
.text-white\/70 { color: rgb(var(--text-rgb) / 0.70); }
.text-white\/80 { color: rgb(var(--text-rgb) / 0.80); }
.text-white\/90 { color: rgb(var(--text-rgb) / 0.90); }

/* hover:text-white/* */
.hover\:text-white:hover     { color: rgb(var(--text-rgb)); }
.hover\:text-white\/50:hover { color: rgb(var(--text-rgb) / 0.50); }
.hover\:text-white\/60:hover { color: rgb(var(--text-rgb) / 0.60); }
.hover\:text-white\/70:hover { color: rgb(var(--text-rgb) / 0.70); }

/* group-hover:text-white — used in EpisodeRow and similar */
.group:hover .group-hover\:text-white     { color: rgb(var(--text-rgb)); }
.group:hover .group-hover\:text-white\/60 { color: rgb(var(--text-rgb) / 0.60); }

/* Backgrounds used as tints / overlays (not solid-white UI elements) */
.bg-white\/5    { background-color: rgb(var(--text-rgb) / 0.05); }
.bg-white\/8    { background-color: rgb(var(--text-rgb) / 0.08); }
.bg-white\/10   { background-color: rgb(var(--text-rgb) / 0.10); }
.bg-white\/20   { background-color: rgb(var(--text-rgb) / 0.20); }
.bg-white\/40   { background-color: rgb(var(--text-rgb) / 0.40); }
.hover\:bg-white\/8:hover { background-color: rgb(var(--text-rgb) / 0.08); }
.hover\:bg-white\/10:hover { background-color: rgb(var(--text-rgb) / 0.10); }

/* Borders */
.border-white\/5  { border-color: rgb(var(--text-rgb) / 0.05); }
.border-white\/10 { border-color: rgb(var(--text-rgb) / 0.10); }
.border-white\/20 { border-color: rgb(var(--text-rgb) / 0.20); }
.border-white\/30 { border-color: rgb(var(--text-rgb) / 0.30); }
.hover\:border-white\/40:hover { border-color: rgb(var(--text-rgb) / 0.40); }

/* Placeholder text */
.placeholder-white\/30::placeholder { color: rgb(var(--text-rgb) / 0.30); }
.placeholder-white\/25::placeholder { color: rgb(var(--text-rgb) / 0.25); }

/* Nav gradient — uses surface color for fade */
[data-theme="light"] header {
  background: linear-gradient(to bottom, rgb(var(--surface-rgb) / 0.97), transparent);
}

/* ── Backdrop vignette (Letterboxd-inspired smooth edge fade) ──────────── */
.backdrop-vignette {
  background-image:
    /* Horizontal: fade sides ~0–16% in, clear middle */
    linear-gradient(to right,
      rgb(var(--surface-rgb)),
      rgb(var(--surface-rgb) / 0.92) 2%,
      rgb(var(--surface-rgb) / 0.72) 5%,
      rgb(var(--surface-rgb) / 0.45) 8.5%,
      rgb(var(--surface-rgb) / 0.2)  12%,
      rgb(var(--surface-rgb) / 0.06) 14.5%,
      rgb(var(--surface-rgb) / 0)    17%,
      rgb(var(--surface-rgb) / 0)    83%,
      rgb(var(--surface-rgb) / 0.06) 85.5%,
      rgb(var(--surface-rgb) / 0.2)  88%,
      rgb(var(--surface-rgb) / 0.45) 91.5%,
      rgb(var(--surface-rgb) / 0.72) 95%,
      rgb(var(--surface-rgb) / 0.92) 98%,
      rgb(var(--surface-rgb))
    ),
    /* Vertical: solid bottom ~20%, then fade up to ~58% */
    linear-gradient(to top,
      rgb(var(--surface-rgb)),
      rgb(var(--surface-rgb)) 20%,
      rgb(var(--surface-rgb) / 0.92) 26%,
      rgb(var(--surface-rgb) / 0.72) 33%,
      rgb(var(--surface-rgb) / 0.45) 41%,
      rgb(var(--surface-rgb) / 0.2)  49%,
      rgb(var(--surface-rgb) / 0.06) 54%,
      rgb(var(--surface-rgb) / 0)    59%
    );
}
