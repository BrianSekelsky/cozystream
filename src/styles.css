@tailwind base;
@tailwind components;
@tailwind utilities;

/* ── Hide scrollbar while keeping scroll behaviour (used on horizontal rows) ── */
.scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
.scrollbar-hide::-webkit-scrollbar { display: none; }

/* ── CSS custom properties ─────────────────────────────────────────────── */

:root {
  --color-surface:         rgb(10 10 10);
  --color-surface-raised:  rgb(18 18 18);
  --color-surface-overlay: rgb(255 255 255 / 0.06);
  --color-accent:          #e50914;
  --color-accent-hover:    color-mix(in srgb, var(--color-accent) 80%, black);
  --card-gap: 0.75rem;
  --row-spacing: 2rem;
  --card-columns-offset: 0;
}

[data-theme="light"] {
  --color-surface:         rgb(245 245 245);
  --color-surface-raised:  rgb(255 255 255);
  --color-surface-overlay: rgb(0 0 0 / 0.06);
}

/* ── Base styles ───────────────────────────────────────────────────────── */

@layer base {
  * {
    box-sizing: border-box;
  }

  html {
    background-color: var(--color-surface);
    color: white;
    scrollbar-gutter: stable;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  body {
    margin: 0;
    min-height: 100vh;
  }

  ::-webkit-scrollbar { width: 6px; }
  ::-webkit-scrollbar-track { background: var(--color-surface); }
  ::-webkit-scrollbar-thumb { @apply bg-white/20 rounded-full; }
  ::-webkit-scrollbar-thumb:hover { @apply bg-white/40; }
}

/* ── Accent helpers (CSS vars aren't picked up as Tailwind classes) ─────── */

.bg-accent       { background-color: var(--color-accent); }
.bg-accent-hover  { background-color: var(--color-accent-hover); }
.text-accent     { color: var(--color-accent); }
.border-accent   { border-color: var(--color-accent); }
.hover\:bg-accent-hover:hover { background-color: var(--color-accent-hover); }

/* ── Font size compensation for serif/mono ─────────────────────────────── */
/* Serif and mono fonts render visually smaller than sans at the same px   */
/* size. Bump small text classes (text-xs, text-sm, text-base) by ~10%    */
/* when used as descendants OR same-element with a serif/mono font class.  */
/* Large sizes (text-3xl+) are intentionally excluded so headings and      */
/* titles keep their intended size.                                        */
.font-serif .text-xs,   .font-mono .text-xs,
.font-serif.text-xs,    .font-mono.text-xs    { font-size: 0.825rem; }  /* 0.75rem × 1.1  */
.font-serif .text-sm,   .font-mono .text-sm,
.font-serif.text-sm,    .font-mono.text-sm    { font-size: 0.963rem; }  /* 0.875rem × 1.1 */
.font-serif .text-base, .font-mono .text-base,
.font-serif.text-base,  .font-mono.text-base  { font-size: 1.1rem; }   /* 1rem × 1.1     */

/* ── Card-width variable (mirrors Browse grid breakpoints, offset by --card-columns-offset) ── */
:root {
  --card-width: calc((100vw - 4rem - 15px - 2 * 0.75rem) / (3 + var(--card-columns-offset)));
}
@media (min-width: 640px)  { :root { --card-width: calc((100vw - 4rem - 15px - 3 * 0.75rem) / (4 + var(--card-columns-offset))); } }
@media (min-width: 768px)  { :root { --card-width: calc((100vw - 4rem - 15px - 4 * 0.75rem) / (5 + var(--card-columns-offset))); } }
@media (min-width: 1024px) { :root { --card-width: calc((100vw - 4rem - 15px - 5 * 0.75rem) / (6 + var(--card-columns-offset))); } }
@media (min-width: 1280px) { :root { --card-width: calc((100vw - 4rem - 15px - 7 * 0.75rem) / (8 + var(--card-columns-offset))); } }

/* ─────────────────────────────────────────────────────────────────────────
   Light-mode overrides — flat selectors (no PostCSS nesting plugin present)
   Repaint the text-white/* and bg-white/* opacity utilities so that
   components need zero changes between themes.
   ───────────────────────────────────────────────────────────────────────── */

/* Base inherited text color (covers elements without an explicit text-* class) */
html[data-theme="light"] { color: rgb(20 20 20); }

/* Text — base + opacity variants */
[data-theme="light"] .text-white     { color: rgb(20 20 20); }
[data-theme="light"] .text-white\/10 { color: rgb(20 20 20 / 0.10); }
[data-theme="light"] .text-white\/20 { color: rgb(20 20 20 / 0.20); }
[data-theme="light"] .text-white\/25 { color: rgb(20 20 20 / 0.25); }
[data-theme="light"] .text-white\/30 { color: rgb(20 20 20 / 0.30); }
[data-theme="light"] .text-white\/40 { color: rgb(20 20 20 / 0.40); }
[data-theme="light"] .text-white\/50 { color: rgb(20 20 20 / 0.50); }
[data-theme="light"] .text-white\/60 { color: rgb(20 20 20 / 0.60); }
[data-theme="light"] .text-white\/70 { color: rgb(20 20 20 / 0.70); }
[data-theme="light"] .text-white\/80 { color: rgb(20 20 20 / 0.80); }
[data-theme="light"] .text-white\/90 { color: rgb(20 20 20 / 0.90); }

/* hover:text-white/* */
[data-theme="light"] .hover\:text-white:hover     { color: rgb(20 20 20); }
[data-theme="light"] .hover\:text-white\/50:hover { color: rgb(20 20 20 / 0.50); }
[data-theme="light"] .hover\:text-white\/60:hover { color: rgb(20 20 20 / 0.60); }
[data-theme="light"] .hover\:text-white\/70:hover { color: rgb(20 20 20 / 0.70); }

/* group-hover:text-white — used in EpisodeRow and similar */
[data-theme="light"] .group:hover .group-hover\:text-white     { color: rgb(20 20 20); }
[data-theme="light"] .group:hover .group-hover\:text-white\/60 { color: rgb(20 20 20 / 0.60); }

/* Backgrounds used as tints / overlays (not solid-white UI elements) */
[data-theme="light"] .bg-white\/5    { background-color: rgb(20 20 20 / 0.05); }
[data-theme="light"] .bg-white\/8    { background-color: rgb(20 20 20 / 0.08); }
[data-theme="light"] .bg-white\/10   { background-color: rgb(20 20 20 / 0.10); }
[data-theme="light"] .bg-white\/20   { background-color: rgb(20 20 20 / 0.20); }
[data-theme="light"] .bg-white\/40   { background-color: rgb(20 20 20 / 0.40); }
[data-theme="light"] .hover\:bg-white\/8:hover { background-color: rgb(20 20 20 / 0.08); }
[data-theme="light"] .hover\:bg-white\/10:hover { background-color: rgb(20 20 20 / 0.10); }

/* Borders */
[data-theme="light"] .border-white\/5  { border-color: rgb(20 20 20 / 0.05); }
[data-theme="light"] .border-white\/10 { border-color: rgb(20 20 20 / 0.10); }
[data-theme="light"] .border-white\/20 { border-color: rgb(20 20 20 / 0.20); }
[data-theme="light"] .border-white\/30 { border-color: rgb(20 20 20 / 0.30); }
[data-theme="light"] .hover\:border-white\/40:hover { border-color: rgb(20 20 20 / 0.40); }

/* Placeholder text */
[data-theme="light"] .placeholder-white\/30::placeholder { color: rgb(20 20 20 / 0.30); }
[data-theme="light"] .placeholder-white\/25::placeholder { color: rgb(20 20 20 / 0.25); }

/* Scrollbar thumb hover */
[data-theme="light"] ::-webkit-scrollbar-thumb:hover { background-color: rgb(20 20 20 / 0.40); }

/* Nav gradient — swap dark fade for light fade */
[data-theme="light"] header {
  background: linear-gradient(to bottom, rgb(245 245 245 / 0.97), transparent);
}
